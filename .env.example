# ============================================
# NATE - ENVIRONMENT CONFIGURATION
# ============================================
# Copy this file to .env and fill in your values
# Never commit .env to version control

# ============================================
# APP
# ============================================
NODE_ENV=development
PORT=3001
APP_URL=http://localhost:5173
API_URL=http://localhost:3001

# Public subscribe page URL (vanity URLs)
# Users get: PUBLIC_PAGE_URL/username (e.g., nate.to/johndoe)
PUBLIC_PAGE_URL=http://localhost:5173

# Frontend environment variables (VITE_ prefix required)
VITE_API_URL=http://localhost:3001
VITE_PUBLIC_PAGE_URL=http://localhost:5173
VITE_PUBLIC_PAGE_DOMAIN=natepay.co

# Production domains (update when deploying)
# APP_URL=https://app.natepay.co
# API_URL=https://api.natepay.co
# PUBLIC_PAGE_URL=https://natepay.co
# VITE_API_URL=https://api.natepay.co
# VITE_PUBLIC_PAGE_URL=https://natepay.co

# ============================================
# DATABASE (Neon PostgreSQL)
# ============================================
# Neon: https://console.neon.tech
# 1. Create a project → Get connection string from Dashboard
# 2. Use the "pooled" connection for serverless (recommended)
# Format: postgresql://user:password@ep-xxx-xxx.region.aws.neon.tech/neondb?sslmode=require
DATABASE_URL=postgresql://neondb_owner:xxx@ep-xxx.us-east-1.aws.neon.tech/neondb?sslmode=require

# ============================================
# REDIS (Upstash)
# ============================================
# Upstash: https://console.upstash.com
# 1. Create a Redis database → Get connection details
# 2. Use the REST URL for serverless or Redis URL for traditional
# Format: rediss://default:xxx@xxx.upstash.io:6379
REDIS_URL=rediss://default:xxx@xxx.upstash.io:6379

# ============================================
# AUTH
# ============================================
# Generate secrets: openssl rand -hex 32
JWT_SECRET=
MAGIC_LINK_SECRET=
SESSION_SECRET=

# Magic link settings
MAGIC_LINK_EXPIRES_MINUTES=15

# ============================================
# STRIPE CONNECT EXPRESS
# ============================================
# Dashboard: https://dashboard.stripe.com/apikeys
# Connect settings: https://dashboard.stripe.com/settings/connect
#
# How it works:
# 1. You create an Express account for each user via API
# 2. Generate an Account Link URL
# 3. User completes Stripe-hosted onboarding
# 4. Webhook notifies you when complete
# 5. You can now send payouts to their account

STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Onboarding return URLs (where Stripe redirects after onboarding)
STRIPE_ONBOARDING_RETURN_URL=http://localhost:5173/settings/payments/complete
STRIPE_ONBOARDING_REFRESH_URL=http://localhost:5173/settings/payments/refresh

# ============================================
# FLUTTERWAVE (Africa)
# ============================================
# Dashboard: https://dashboard.flutterwave.com
# Enable with: ENABLE_FLUTTERWAVE=true

FLUTTERWAVE_PUBLIC_KEY=FLWPUBK_TEST-...
FLUTTERWAVE_SECRET_KEY=FLWSECK_TEST-...
FLUTTERWAVE_WEBHOOK_SECRET=

# ============================================
# EMAIL
# ============================================
# Resend: https://resend.com/api-keys (recommended)
RESEND_API_KEY=re_...

EMAIL_FROM=Nate <hello@natepay.co>

# ============================================
# FILE STORAGE (Cloudflare R2)
# ============================================
# Cloudflare R2: https://dash.cloudflare.com → R2
# 1. Create a bucket (e.g., "nate-uploads")
# 2. Create API token: R2 → Manage R2 API Tokens → Create
# 3. Get Account ID from the right sidebar
# Note: R2 uses S3-compatible API, so we use AWS SDK

R2_ACCOUNT_ID=your-account-id
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET=nate-uploads
R2_PUBLIC_URL=https://uploads.natepay.co

# For custom domain: R2 → bucket → Settings → Public Access → Custom Domain

# ============================================
# SMS (Phase 2)
# ============================================
# MessageBird: https://dashboard.bird.com (global)
# Termii: https://accounts.termii.com (Africa)

MESSAGEBIRD_API_KEY=
TERMII_API_KEY=

SMS_FROM=Nate

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_FLUTTERWAVE=false
ENABLE_SMS=false

# ============================================
# MONITORING (Optional but recommended)
# ============================================
# Sentry: https://sentry.io
SENTRY_DSN=

# PostHog: https://posthog.com (product analytics)
POSTHOG_API_KEY=
