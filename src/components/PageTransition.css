/**
 * Page Transition Animations
 *
 * Two animation systems:
 * 1. View Transitions API (modern browsers) - uses ::view-transition pseudo-elements
 * 2. CSS fallback - uses .page-enter class animation
 *
 * Direction-aware: forward navigation slides right-to-left, back slides left-to-right.
 * Both use the same timing and easing for consistency.
 */

/* ============================================
   VIEW TRANSITIONS API (Chrome, Edge, Safari 18+)
   ============================================ */

/* Forward navigation: content slides from right */
[data-nav-direction="forward"] ::view-transition-old(root) {
  animation: slide-out-left 180ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

[data-nav-direction="forward"] ::view-transition-new(root) {
  animation: slide-in-right 180ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Back navigation: content slides from left */
[data-nav-direction="back"] ::view-transition-old(root) {
  animation: slide-out-right 180ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

[data-nav-direction="back"] ::view-transition-new(root) {
  animation: slide-in-left 180ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Default fallback (first page load, no direction set) */
::view-transition-old(root) {
  animation: page-fade-out 180ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

::view-transition-new(root) {
  animation: page-fade-in 180ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Directional keyframes - subtle 12px movement with fade */
@keyframes slide-out-left {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(-12px); }
}

@keyframes slide-in-right {
  from { opacity: 0; transform: translateX(12px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slide-out-right {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(12px); }
}

@keyframes slide-in-left {
  from { opacity: 0; transform: translateX(-12px); }
  to { opacity: 1; transform: translateX(0); }
}

/* Default fade keyframes (fallback) */
@keyframes page-fade-out {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.98); }
}

@keyframes page-fade-in {
  from { opacity: 0; transform: scale(1.02); }
  to { opacity: 1; transform: scale(1); }
}

/* ============================================
   CSS FALLBACK (Firefox, older browsers)
   ============================================ */

.page-transition-container {
  width: 100%;
  height: 100%;
}

/* Direction-aware fallback animations */
[data-nav-direction="forward"] .page-enter {
  animation: page-enter-forward 200ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

[data-nav-direction="back"] .page-enter {
  animation: page-enter-back 200ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Default fallback (no direction set) */
.page-enter {
  animation: page-enter-animation 200ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

@keyframes page-enter-forward {
  from { opacity: 0; transform: translateX(12px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes page-enter-back {
  from { opacity: 0; transform: translateX(-12px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes page-enter-animation {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ============================================
   REDUCED MOTION SUPPORT
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  ::view-transition-old(root),
  ::view-transition-new(root),
  .page-enter {
    animation: none;
  }

  .page-transition-container {
    opacity: 1;
    transform: none;
  }
}
